// frontend/src/pages/ProfilePage.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth';\nimport '../styles/ProfilePage.css';\n\nconst ProfilePage = () => {\n    const { user, isAuthenticated, logout } = useAuth();\n    const navigate = useNavigate();\n    const [bookings, setBookings] = useState([]);\n    const [loyaltyPoints, setLoyaltyPoints] = useState(0);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        if (!isAuthenticated) {\n            navigate('/login');\n            return;\n        }\n\n        fetchUserData();\n    }, [isAuthenticated, navigate]);\n\n    const fetchUserData = async () => {\n        setIsLoading(true);\n        setError('');\n\n        try {\n            const token = localStorage.getItem('token');\n            const headers = {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            };\n\n            // جلب الحجوزات\n            const bookingsResponse = await fetch('/api/v1/bookings/me', { headers });\n            if (bookingsResponse.ok) {\n                const bookingsData = await bookingsResponse.json();\n                setBookings(bookingsData.data || []);\n            }\n\n            // في المستقبل، سيتم جلب نقاط الولاء من API منفصل\n            // setLoyaltyPoints(userData.loyaltyPoints);\n            setLoyaltyPoints(150); // قيمة مؤقتة للاختبار\n        } catch (err) {\n            setError('فشل تحميل البيانات');\n            console.error(err);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleLogout = async () => {\n        await logout();\n        navigate('/login');\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"profile-container\">\n                <div className=\"profile-card\">\n                    <p>جاري التحميل...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"profile-container\">\n            <div className=\"profile-header\">\n                <div className=\"profile-info\">\n                    <h1>ملفي الشخصي</h1>\n                    <p className=\"user-email\">{user?.email}</p>\n                </div>\n                <button className=\"btn-logout\" onClick={handleLogout}>\n                    تسجيل الخروج\n                </button>\n            </div>\n\n            {error && <div className=\"error-message\">{error}</div>}\n\n            <div className=\"profile-grid\">\n                {/* بطاقة نقاط الولاء */}\n                <div className=\"profile-card loyalty-card\">\n                    <h2>نقاط الولاء</h2>\n                    <div className=\"loyalty-points-display\">\n                        <span className=\"points-number\">{loyaltyPoints}</span>\n                        <span className=\"points-label\">نقطة</span>\n                    </div>\n                    <p className=\"loyalty-description\">استخدم نقاطك للحصول على عروض خاصة وخصومات</p>\n                </div>\n\n                {/* بطاقة الحجوزات */}\n                <div className=\"profile-card bookings-card\">\n                    <h2>حجوزاتي</h2>\n                    <div className=\"bookings-count\">\n                        <span className=\"count-number\">{bookings.length}</span>\n                        <span className=\"count-label\">حجز</span>\n                    </div>\n                    <p className=\"bookings-description\">عدد الحجوزات النشطة والمكتملة</p>\n                </div>\n            </div>\n\n            {/* قائمة الحجوزات */}\n            <div className=\"bookings-section\">\n                <h2>سجل الحجوزات</h2>\n                {bookings.length === 0 ? (\n                    <div className=\"no-bookings\">\n                        <p>لا توجد حجوزات حالياً</p>\n                        <button className=\"btn-primary\" onClick={() => navigate('/booking')}>\n                            احجز الآن\n                        </button>\n                    </div>\n                ) : (\n                    <div className=\"bookings-list\">\n                        {bookings.map((booking) => (\n                            <div key={booking.id} className=\"booking-item\">\n                                <div className=\"booking-details\">\n                                    <p className=\"booking-date\">\n                                        <strong>التاريخ:</strong> {new Date(booking.booking_date).toLocaleDateString('ar-LY')}\n                                    </p>\n                                    <p className=\"booking-duration\">\n                                        <strong>المدة:</strong> {booking.duration_hours} ساعات\n                                    </p>\n                                    <p className=\"booking-price\">\n                                        <strong>السعر:</strong> {booking.total_price} دينار\n                                    </p>\n                                </div>\n                                <div className=\"booking-status\">\n                                    <span className={`status-badge status-${booking.status}`}>\n                                        {booking.status === 'pending' && 'في الانتظار'}\n                                        {booking.status === 'confirmed' && 'مؤكد'}\n                                        {booking.status === 'cancelled' && 'ملغى'}\n                                        {booking.status === 'completed' && 'مكتمل'}\n                                    </span>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* زر الحجز الجديد */}\n            <div className=\"profile-actions\">\n                <button className=\"btn-primary\" onClick={() => navigate('/booking')}>\n                    حجز جديد\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default ProfilePage;\n
